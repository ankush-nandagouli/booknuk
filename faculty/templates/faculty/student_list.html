{% extends 'base.html' %}

{% block content %}
<div class="container mx-auto px-6 py-8">
  <h2 class="text-3xl font-bold text-indigo-700 mb-6 text-center">👩‍🎓 Student Management</h2>

  <!-- Search -->
  <form method="GET" class="flex justify-center mb-6">
    <div class="flex w-full max-w-md">
      <input type="text" name="q" value="{{ q }}" placeholder="Search by username or email..."
             class="w-full px-4 py-2 border border-gray-300 rounded-l-md focus:outline-none focus:ring-2 focus:ring-indigo-400">
      <button type="submit" class="px-4 py-2 bg-indigo-600 text-white rounded-r-md">Search</button>
    </div>
  </form>

  <!-- Table -->
  <div class="overflow-x-auto shadow-md rounded-lg">
    <table class="min-w-full bg-white rounded-lg">
      <thead class="bg-indigo-600 text-white">
        <tr>
          <th class="px-6 py-3">Username</th>
          <th class="px-6 py-3">Email</th>
          <th class="px-6 py-3">Status</th>
          <th class="px-6 py-3 text-center">Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for student in students %}
        <tr class="hover:bg-gray-100">
          <td class="px-6 py-4">{{ student.username }}</td>
          <td class="px-6 py-4">{{ student.email }}</td>
          <td class="px-6 py-4">
            {% if student.is_active %}
              <span class="px-3 py-1 text-xs bg-green-100 text-green-700 rounded-full">Active</span>
            {% else %}
              <span class="px-3 py-1 text-xs bg-red-100 text-red-700 rounded-full">Suspended</span>
            {% endif %}
          </td>
            {% if student.slug %}
          <td class="px-6 py-4 text-center space-x-2">
            <a href="{% url 'faculty:students_profile' student.slug %}" class="px-3 py-1 bg-blue-500 text-white rounded-full">Profile</a>
            <a href="{% url 'faculty:suspend_students' student.slug %}" class="px-3 py-1 bg-red-500 text-white rounded-full">
              {% if student.is_active %} Suspend {% else %} Activate {% endif %}
            </a>
          </td>
            {% endif %}
        </tr>
        {% empty %}
        <tr><td colspan="4" class="text-center py-4">No students found.</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <!-- Cursor-based navigation -->
  {% if next_cursor %}
  <div class="flex justify-center mt-6">
    <a href="?q={{ q }}&cursor={{ next_cursor }}" class="px-4 py-2 bg-gray-200 rounded">Load More »</a>
  </div>
  {% endif %}
</div>
{% endblock %}
